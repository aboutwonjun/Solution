#include <iostream>
#include <string>
#include "game.h"
using namespace std;

int main() {
    string user_name;
    int option;

    cout << "** 모험가 키우기  **" << endl;
    cout << " =======================================================================";
    cout << R"(
             /_\
_            )_(            _
|`-.___,.-~'`|=|`'~-.,___,-'|
|  __________|=|__________  |
| |    ______|=|__________| | ___      _      _  _   _             _
| |   |  ____|=|_____     / |  |  |_| |_  |  |_ | _ |_ |\| |\  /\ |_
| |   | /    |=|    /    /| |  |  | | |_  |_ |_ |_| |_ | | |/  \/ |
| |   |/   ,-|_|-. / /  /_|_|______ ______     _______        ____
| |      ,' _____ / // / \    ___  |\    /     \      `.      \   \
| |     / ,'| A |/ // /   |  |   \ | |  |       |  |`.  \     /    \
| |    /_// |/V\/ // /    |  |    \| |  |       |  |  \  \   /  /\  \
| |      /__| |/  / /     |  |       |  |       |  |   \  | /  /  \  \
| |     /\  | / /| /\     |  |__/|   |  |       |  |   |  ||  |    |  |
| |    /  \ |/ // // \    |   __ |   |  |       |  |   |  ||  |____|  |
| |   /    \/ |/ //   \   |  |  \|   |  |       |  |   |  ||   ____   |
| |  /     /    //     \  |  |       |  |       |  |   /  ||  |    |  |
| | /     / /  /|       \ |  |    /| |  |    /| |  |  /  / |  |    |  |
| |/_____/ // / |________\|  |___/ | |  |___/ | |  |,'  /  |  |    |  |
| |     / // /| |        /_________|/_________|/______,'  /____\  /____\
\ \    / // / | |       /|/ /_               ___  ___    _   _  _  _ ___
 \ \  /  / /| | |______/ | //_\  |  | |\| |/  |/\  | |_||_  |_)/_\(_` |
  \ \/______| | |________|/ | |  |_ | | | |\  |\/  | | ||_  |  | |._) |
   `.`.     | | |     ,','
     `.`.   | | |   ,','    _        _        _        _
       `.`-.| | |,-','     |.\      |.\      |.\      |.\  
         `-.| | |,-'        \\\      \\\      \\\      \\\ 
            | | |    ________\\\______\\\______\\\______\\\_____________
            | | |   | .--  __        __    ,--.        __   __   __| _  |
            | | |   | |-  /  \ |  | |  `   `--. | | | /  \ |  ` /  |(_` |
            | | |   | |   \__/ \_/| |      .__/ \/ \/ \__/ |    \__|._) |
            | | |   '---------------------------------------------------'
             \|/                  \\\ /|   \\\ /|   \\\ /|   \\\ /|
              V                  __\\V /  __\\V /  __\\V /  __\\V /
                                 \___O/   \___O/   \___O/   \___O/
                                     \/\      \/\      \/\      \/\
                                      \/\      \/\      \/\      \/\
                                       (O)      (O)      (O)      (O)
)";
    cout << " =======================================================================";


    cout << endl;
    cout << "모험가의 이름을 입력하세요 : ";
    string chrname;
    cin >> chrname;

    string monster_name = "대마왕 가논돌프";

    Character chr(chrname);
    Character monster(monster_name);

    cout << chrname << "의 현재 상태이다. " << endl;
    cout << endl;
    chr.showStatus();
    cout << endl;

    cout << "야생의 몬스터가 나타났다! ";

    while (true)
    {
        cout << "<다음 동작을 선택해 주세요>\n"
            << "--------------------------------------------\n"
            << "|▶ 0. 죽음 (게임 종료)                     |\n"
            << "|▶ 1. 이름 변경                            |\n"
            << "|▶ 2. Level Up!                            |\n"
            << "|▶ 3. 빨간 포션 줍기                       |\n"
            << "|▶ 4. 파란 포션 줍기                       |\n"
            << "|▶ 5. 빨간 포션을 사용합니다. (체력 5 회복)|\n"
            << "|▶ 6. 파란 포션을 사용합니다. (마나 5 회복)|\n"
            << "|▶ 7. 체력훈련                             |\n"
            << "|▶ 8. 마법공부                             |\n"
            << "|▶ 9. 상태창 오픈!                         |\n"
            << "|▶ 10. 공격!                               |\n"
            << "--------------------------------------------" << endl;

        // 체력 아이템을 사용합니다.
        // 물약을 마십니다. 
        // 체력 아이템 획득!
        // 물약 획득!
        // 
        // 공격!
        // 방어!
        // 체 

        cout << endl;
        cout << "당신의 선택은? :" << endl;
        cin >> option;
        chr.manipulateCharacter(option);

        if (monster.getHp() > 0) {
            monster.attack(chr); // 몬스터 공격
        }

        if (chr.getHp() <= 0 || chr.getMp() <= 0) {
            chr.saveRecord(); // 게임 기록 저장
            cout << "게임을 종료합니다." << endl;
            break; // 게임 종료
        }
    }

    return 0;
}

